# TMS Project Rules

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å –î–µ–ø–ª–æ—è (Deploy Workflow)
–ü—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –¥–µ–ø–ª–æ–π –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫—Ä—É–ø–Ω–æ–π –∑–∞–¥–∞—á–∏, —Å–ª–µ–¥—É–π —ç—Ç–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:

1. **–°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**: `cd frontend && npm run build`.
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π `rsync` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ `src/`, `alembic/`, `requirements.txt` –∏ `docker-compose.yml` –≤ `/root/tms/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä `185.207.1.122`.
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏–∫–∏**: –ü–µ—Ä–µ–Ω–æ—Å–∏ `frontend/dist/` –≤ `/var/www/tms/`.
4. **–û—á–∏—Å—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ–≥–¥–∞ —É–¥–∞–ª—è–π —Ñ–∞–π–ª—ã `._*` (AppleDouble) –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø–æ–º–æ—â—å—é `find /root/tms -name '._*' -delete`.
5. **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å–∫–∞–π `docker-compose exec -T backend alembic upgrade head`.
6. **–î–æ–º–µ–Ω**: –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω ‚Äî `https://myappnf.ru`.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫
- **Backend**: FastAPI, SQLAlchemy (Async), Alembic, Pydantic v2.
- **Frontend**: React, TypeScript, Vite, Ant Design (antd).
- **Database**: PostgreSQL —Å PostGIS.
- **Cache**: Redis.
- **Deployment**: Docker Compose + Nginx (–Ω–∞ —Ö–æ—Å—Ç–µ).

## üìù –ü—Ä–∞–≤–∏–ª–∞ –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–Ø–∑—ã–∫**: –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ **—Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**.
- **–ö–æ–º–º–∏—Ç—ã**: –î–µ–ª–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ git commit-—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ –ë–î ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Alembic –º–∏–≥—Ä–∞—Ü–∏–∏.
- **–°—Ç–∏–ª–∏**: –í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π Ant Design –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ TypeScript –∏ Pydantic –º–æ–¥–µ–ª—è—Ö.

## üìÅ –ü—É—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (185.207.1.122)
- **–ü—Ä–æ–µ–∫—Ç**: `/root/tms`
- **Frontend (Static)**: `/var/www/tms`
- **–ö–æ–Ω—Ñ–∏–≥ Nginx**: `/etc/nginx/sites-enabled/myappnf.ru`
- **SSH –ö–ª—é—á**: `~/.ssh/id_ed25519`
